version: "3.1"

intents:
  - greet
  - goodbye
  - order_product
  - order
  - add_to_cart
  - view_cart
  - update_cart_quantity
  - delete_from_cart
  - inform_product
  - inform_order_id
  - ask_product_info
  - ask_warranty
  - suggest_product_combine
  - suggest_product_price
  - suggest_product_battery
  - suggest_product_storage
  - suggest_product_ram
  - ask_order
  - ask_store
  - confirm_order
  - cancel_order
  - cancel
  - out_of_scope
  - nlu_fallback
  - compare_products
  - check_stock
  - restart_slot
  - select_quantity
  - select_variant
  - ask_product_detail_variant_infor
  - ask_product_variant_infor
  - select_branch_order:
      use_entities:
        - selected_branch_id
  - select_branch_cart:
      use_entities:
        - selected_branch_id
  - request_return_order
  - ask_order_general:
      use_entities:
        - order_direction
        - order_index
  - ask_product_price
  - ask_product_spec
  - ask_product_technical_specs
  - chitchat
  - show_variant_details
  - ask_order_by_product
  - ask_unpaid_orders
  - ask_unshipped_orders
  - ask_recent_orders
  - provide_return_reason
  - ask_order_specific
  - ask_order_filter
  - faq


entities:
  - branch_name
  - selected_branch_id
  - category
  - storage_qualifier
  - storage:
      use_entity_roles_or_groups: True
      roles:
        - from
        - to
  - battery_qualifier
  - battery:
      use_entity_roles_or_groups: True
      roles:
        - from
        - to
  - price_qualifier
  - price:
      use_entity_roles_or_groups: True
      roles:
        - from
        - to

  - ram_qualifier
  - ram:
      use_entity_roles_or_groups: True
      roles:
        - from
        - to
  - brand
  - full_name
  - product_name
  - product_1
  - product_2
  - quantity
  - quantity_action
  - quantity_change
  - order_id
  - order_limit
  - order_status
  - order_direction
  - order_index
  - return_reason
  - time
  - variant_id
  - user_id
  - variant_name
  - variant_color
  - spec_type

slots:
  user_id:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: user_id

  quantity_change:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: quantity_change

  quantity_action:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: quantity_action

  order_limit:
    type: any
    mappings:
      - type: from_entity
        entity: order_limit

  order_status:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: order_status

  order_direction:
    type: categorical
    values:
      - newest
      - oldest
    mappings:
      - type: from_entity
        entity: order_direction

  order_index:
    type: categorical
    values:
      - "1"
      - "2"
      - "3"
      - "4"
      - "5"
    mappings:
      - type: from_entity
        entity: order_index

  time:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: time

  brand:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: brand

  branch_name:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: branch_name

  validated_branch_id:
    type: text
    mappings:
      - type: custom

  validated_variant_color:
    type: text
    mappings:
      - type: custom

  user_name:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  product_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: product_name

  battery_qualifier:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: battery_qualifier

  ram_qualifier:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: ram_qualifier

  storage_qualifier:
    type: text
    mappings:
      - type: from_entity
        entity: storage_qualifier

  price_qualifier:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: price_qualifier

  variant_name:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: variant_name

  variant_color:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: variant_color

  quantity:
    type: float
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: quantity

  product_1:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: product_1

  product_2:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: product_2

  category:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: category

  min_battery:
    type: text
    mappings:
      - type: from_entity
        entity: battery
        role: from

  min_price:
    type: text
    mappings:
      - type: from_entity
        entity: price
        role: from

  max_price:
    type: text
    mappings:
      - type: from_entity
        entity: price
        role: to

  min_storage:
    type: text
    mappings:
      - type: from_entity
        entity: storage
        role: from

  max_storage:
    type: text
    mappings:
      - type: from_entity
        entity: storage
        role: to

  min_ram:
    type: text
    mappings:
      - type: from_entity
        entity: ram
        role: from

  max_ram:
    type: text
    mappings:
      - type: from_entity
        entity: ram
        role: to

  selected_branch_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: selected_branch_id

  validated_product_id:
    type: any
    influence_conversation: false
    mappings: []

  validated_variant_id:
    type: any
    influence_conversation: false
    mappings: []

  variant_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: variant_id

  validated_quantity:
    type: float
    initial_value: null
    influence_conversation: false
    mappings: []

  validated_price:
    type: float
    initial_value: null
    influence_conversation: false
    mappings: []

  validated_total_price:
    type: float
    initial_value: null
    influence_conversation: false
    mappings: []

  validated_address:
    type: text
    mappings:
      - type: from_text
        intent: None

  validated_customer_name:
    type: text
    mappings:
      - type: from_text
        intent: None

  validated_phone:
    type: text
    mappings:
      - type: from_text
        intent: None

  order_id:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: order_id
      - type: from_text
        intent: inform_order_id

  return_reason:
    type: text
    influence_conversation: false
    mappings:
      - type: from_entity
        entity: return_reason
        intent: provide_return_reason

  spec_type:
    type: text
    mappings:
      - type: from_entity
        entity: spec_type

forms:
  order_form:
    required_slots:
      - product_name
      - variant_name
      - quantity

  add_to_cart_form:
    required_slots:
      - product_name
      - variant_name
      - variant_color
      - quantity

  compare_products_form:
    required_slots:
      - product_1
      - product_2

  return_order_form:
    required_slots:
      - order_id
      - return_reason

responses:
  utter_ask_product_1:
    - text: "Bạn muốn so sánh sản phẩm nào?"
    - text: "Dạ anh/chị cho em biết sản phẩm đầu tiên muốn so sánh ạ?"
    - text: "Dạ em xin hỏi sản phẩm thứ nhất anh/chị muốn so sánh là gì ạ?"

  utter_ask_product_2:
    - text: "Bạn muốn so sánh với sản phẩm nào?"
    - text: "Dạ anh/chị muốn so sánh với sản phẩm nào ạ?"
    - text: "Dạ sản phẩm thứ hai để so sánh là gì ạ?"

  utter_ask_product_name:
    - text: "Bạn muốn đặt sản phẩm gì?"
    - text: "Dạ anh/chị muốn đặt sản phẩm nào ạ?"
    - text: "Dạ em xin hỏi anh/chị cần đặt sản phẩm gì ạ?"
    - text: "Dạ cho em biết tên sản phẩm anh/chị muốn đặt nhé?"

  utter_ask_which_product:
    - text: "Bạn muốn biết thông tin về sản phẩm nào?"

  utter_product_not_found:
    - text: "Xin lỗi, tôi không tìm thấy sản phẩm {product_name}"

  utter_ask_spec_type:
    - text: "Bạn muốn biết thông số nào của sản phẩm? Ví dụ: pin, RAM, bộ nhớ, camera, màn hình, CPU, GPU."

  utter_ask_quantity:
    - text: "Bạn muốn đặt bao nhiêu sản phẩm?"
    - text: "Dạ anh/chị muốn đặt mấy sản phẩm ạ?"
    - text: "Dạ em xin hỏi số lượng anh/chị cần đặt là bao nhiêu ạ?"
    - text: "Dạ anh/chị đặt bao nhiêu chiếc ạ?"

  utter_ask_variant_name:
    - text: "Bạn muốn phiên bản nào?"
    - text: "Dạ anh/chị chọn phiên bản nào ạ?"
    - text: "Dạ em xin hỏi anh/chị cần phiên bản nào ạ?"

  utter_ask_variant_color:
    - text: "Bạn muốn màu sắc nào?"
    - text: "Dạ anh/chị chọn màu gì ạ?"
    - text: "Dạ em xin hỏi anh/chị cần màu sắc nào ạ?"

  utter_ask_reason_for_return:
    - text: "Bạn vui lòng cho biết lý do muốn trả hàng nhé."
    - text: "Dạ anh/chị cho em biết lý do trả hàng ạ?"
    - text: "Dạ em xin hỏi anh/chị lý do muốn trả hàng là gì ạ?"

  utter_ask_order_id:
    - text: "Bạn vui lòng cung cấp mã đơn hàng (gồm 24 ký tự) để tôi kiểm tra nhé."
    - text: "Bạn muốn kiểm tra đơn hàng nào? Vui lòng cho tôi mã đơn hàng."
    - text: "Dạ anh/chị cho em biết mã đơn hàng của anh/chị ạ?"

  utter_greet:
    - text: "Xin chào! Tôi có thể giúp gì cho bạn hôm nay?"
    - text: "Chào anh/chị! Em có thể hỗ trợ gì cho anh/chị ạ?"
    - text: "Dạ chào anh/chị! Em là tư vấn viên TechShop, rất vui được phục vụ anh/chị!"
    - text: "Xin chào anh/chị! Anh/chị cần tư vấn sản phẩm hay dịch vụ gì ạ?"
    - text: "Chào mừng anh/chị đến với TechShop! Em có thể giúp gì cho anh/chị hôm nay?"

  utter_greet_personalized:
    - text: "Chào {user_name}, rất vui được gặp lại! Bạn cần tôi hỗ trợ gì hôm nay?"
    - text: "Dạ chào anh/chị {user_name}! Em rất vui được gặp lại. Hôm nay anh/chị cần em hỗ trợ gì ạ?"
    - text: "Chào {user_name}! Hôm nay em có thể giúp gì cho anh/chị ạ?"
    - text: "Dạ {user_name} thân mến! Rất vui được phục vụ anh/chị lần nữa. Anh/chị cần tư vấn gì ạ?"

  utter_goodbye:
    - text: "Cảm ơn bạn đã ghé thăm. Hẹn gặp lại!"
    - text: "Dạ cảm ơn anh/chị! Chúc anh/chị một ngày tốt lành. Hẹn gặp lại ạ!"
    - text: "Cảm ơn anh/chị đã tin tưởng TechShop. Hẹn gặp lại anh/chị!"
    - text: "Dạ em cảm ơn anh/chị! Nếu cần hỗ trợ gì thêm, anh/chị cứ liên hệ em nhé!"
    - text: "Cảm ơn anh/chị! Chúc anh/chị sử dụng sản phẩm vui vẻ. Hẹn gặp lại!"

  utter_ask_product_info:
    - text: "Bạn muốn xem giá hoặc thông tin của sản phẩm nào ạ?"
    - text: "Dạ anh/chị cần xem thông tin sản phẩm nào ạ?"
    - text: "Dạ em xin hỏi anh/chị muốn tìm hiểu về sản phẩm gì ạ?"
    - text: "Dạ anh/chị cho em biết tên sản phẩm cần xem thông tin nhé?"

  utter_submit_order:
    - text: "Cảm ơn bạn đã cung cấp thông tin. Đơn hàng của bạn đã được ghi nhận và sẽ được xử lý sớm nhất."
    - text: "Dạ em đã ghi nhận đơn hàng của anh/chị. Chúng em sẽ xử lý và liên hệ lại sớm nhất ạ!"
    - text: "Cảm ơn anh/chị! Đơn hàng đã được gửi đi và bộ phận của em sẽ liên hệ xác nhận trong thời gian sớm nhất."
    - text: "Dạ đơn hàng của anh/chị đã được tiếp nhận thành công. Em sẽ theo dõi và cập nhật cho anh/chị ạ!"

  utter_order_confirmed:
    - text: "Đơn hàng của bạn đã được xác nhận! Chúng tôi sẽ liên hệ với bạn sớm để hoàn tất quá trình."
    - text: "Dạ đơn hàng đã xác nhận thành công! Bộ phận giao hàng sẽ liên hệ anh/chị trong thời gian sớm nhất ạ."
    - text: "Cảm ơn anh/chị! Đơn hàng đã được xác nhận. Em sẽ theo dõi và thông báo khi có cập nhật mới."
    - text: "Dạ đơn của anh/chị đã được xác nhận rồi ạ. Chúng em sẽ liên hệ để hoàn tất thủ tục giao hàng nhé!"

  utter_ask_return_reason:
    - text: "Bạn vui lòng cho biết lý do trả hàng nhé."
    - text: "Dạ anh/chị cho em biết lý do trả hàng ạ?"
    - text: "Dạ em xin hỏi anh/chị lý do muốn trả hàng là gì ạ?"

  utter_order_not_found:
    - text: "Tôi không tìm thấy đơn hàng nào với mã {order_id}."
    - text: "Rất tiếc, mã đơn hàng {order_id} không tồn tại."

  utter_no_orders_found:
    - text: "Hiện tại bạn không có đơn hàng nào."
    - text: "Tôi không tìm thấy đơn hàng nào phù hợp với yêu cầu của bạn."

  utter_fallback:
    - text: "Xin lỗi, tôi chưa hiểu ý bạn. Bạn có thể nói lại rõ hơn được không?"
    - text: "Dạ em xin lỗi, em chưa hiểu rõ ý anh/chị. Anh/chị có thể nói rõ hơn được không ạ?"
    - text: "Em xin lỗi, em chưa nắm được yêu cầu của anh/chị. Anh/chị vui lòng diễn đạt lại giúp em nhé?"
    - text: "Dạ em chưa rõ anh/chị muốn hỏi về vấn đề gì. Anh/chị có thể nói cụ thể hơn được không ạ?"

  utter_chitchat/deny:
    - text: "Không sao, khi nào cần thì cứ nói nhé."

  utter_chitchat/thanks:
    - text: "Rất vui được giúp bạn!"

  utter_chitchat/just_looking:
    - text: "Không sao đâu, bạn cứ xem thoải mái nhé."

  utter_chitchat/goodbye:
    - text: "Tạm biệt nhé, hẹn gặp lại!"

  utter_chitchat/greet:
    - text: "Xin chào, mình ở đây để giúp bạn."

  utter_chitchat/compliment:
    - text: "Cảm ơn nha, bạn nói vậy mình ngại ghê!"

  utter_chitchat/positive_feedback:
    - text: "Dạ vâng!"
    - text: "Tuyệt vời!"

  utter_chitchat/ask_how_are_you:
    - text: "Tôi là bot nên lúc nào cũng khoẻ. Cảm ơn bạn đã hỏi thăm! Bạn cần hỗ trợ gì ạ?"
    - text: "Em vẫn ổn ạ. Em có thể giúp gì cho anh/chị?"

  utter_chitchat/ask_are_you_a_bot:
    - text: "Đúng vậy, tôi là một trợ lý ảo được lập trình để hỗ trợ bạn."
    - text: "Em là bot tư vấn của TechShop. Em có thể hỗ trợ anh/chị 24/7 ạ."

  utter_chitchat/ask_what_can_you_do:
    - text: "Tôi có thể giúp bạn tìm sản phẩm, tra cứu đơn hàng, tư vấn kỹ thuật và đặt hàng."
    - text: "Em có thể tư vấn sản phẩm, báo giá, kiểm tra tình trạng đơn hàng và hỗ trợ đặt hàng cho anh/chị ạ."

  utter_chitchat/insult:
    - text: "Tôi xin lỗi nếu đã làm bạn không hài lòng. Tôi sẽ cố gắng cải thiện."
    - text: "Em xin ghi nhận góp ý của anh/chị ạ."
    - text: "Em xin lỗi vì trải nghiệm chưa tốt. Anh/chị có thể nói rõ vấn đề em hỗ trợ lại được không ạ?"

  utter_chitchat/apologize:
    - text: "Không sao đâu ạ."
    - text: "Dạ không có gì ạ."

  utter_ask_if_want_to_order:
    - text: "Bạn có muốn đặt hàng sản phẩm này không ạ?"
      buttons:
        - title: "Có, đặt hàng"
          payload: "/order"
        - title: "Chỉ tham khảo thôi"
          payload: "/chitchat"

    - text: "Bạn có muốn mình lên đơn cho bạn luôn không?"
      buttons:
        - title: "OK, lên đơn"
          payload: "/order"
        - title: "Để mình xem thêm"
          payload: "/chitchat/just_looking"

    - text: "Mình tiến hành đặt hàng cho bạn luôn nhé?"
      buttons:
        - title: "Đồng ý"
          payload: "/order"
        - title: "Không, cảm ơn"
          payload: "/chitchat/just_looking"

    - text: "Bạn có muốn đặt hàng ngay để mình giữ sản phẩm cho bạn không?"
      buttons:
        - title: "Giữ hàng cho mình"
          payload: "/order"
        - title: "Không, mình chỉ hỏi giá"
          payload: "/chitchat/just_looking"

  utter_faq/tech_support:
    - condition:
        - type: slot
          name: category
          value: laptop
      text: "Đối với Laptop, TechShop hỗ trợ cài đặt Windows, Office và các phần mềm cơ bản miễn phí. Ngoài ra, shop cũng hỗ trợ nâng cấp RAM, SSD và vệ sinh máy định kỳ. Bạn cần hỗ trợ cụ thể gì không ạ?"
    - condition:
        - type: slot
          name: category
          value: điện thoại
      text: "Với Điện thoại, TechShop hỗ trợ chuyển dữ liệu, cài đặt ứng dụng, cắt SIM và dán màn hình. Nếu bạn mua máy tại shop, các dịch vụ này thường là miễn phí ạ."
    - condition:
        - type: slot
          name: category
          value: tai nghe
      text: "Để kết nối tai nghe, bạn hãy bật Bluetooth trên thiết bị và tai nghe, sau đó chọn tên tai nghe trong danh sách. Nếu cần hướng dẫn reset hoặc chỉnh âm, bạn có thể xem sách hướng dẫn hoặc mang qua shop ạ."
    - condition:
        - type: slot
          name: category
          value: chuột
      text: "Chuột gaming thường có phần mềm riêng để chỉnh LED và DPI. Bạn có thể tải trên trang chủ hãng hoặc mang qua shop để nhân viên cài đặt giúp nhé."
    - text: "TechShop hỗ trợ kỹ thuật cho tất cả các sản phẩm bán ra. Bạn cần hỗ trợ về Laptop, Điện thoại hay Phụ kiện ạ?"

  utter_faq/support_error:
    - condition:
        - type: slot
          name: category
          value: laptop
      text: "Nếu Laptop gặp sự cố (màn hình xanh, không lên nguồn, nóng máy...), bạn vui lòng mang máy đến cửa hàng gần nhất để kỹ thuật viên kiểm tra nhé. TechShop sẽ kiểm tra miễn phí và báo giá sửa chữa nếu có."
    - condition:
        - type: slot
          name: category
          value: điện thoại
      text: "Các lỗi thường gặp trên điện thoại như treo logo, lỗi màn hình, pin ảo... cần được kiểm tra trực tiếp. Bạn hãy mang máy ra cửa hàng để được hỗ trợ nhanh nhất nhé."
    - condition:
        - type: slot
          name: category
          value: tai nghe
      text: "Nếu tai nghe bị lỗi (nghe 1 bên, không sạc, mic nhỏ...), bạn hãy thử reset lại tai nghe trước. Nếu vẫn không được, vui lòng mang qua shop để bảo hành hoặc sửa chữa."
    - condition:
        - type: slot
          name: category
          value: chuột
      text: "Lỗi click đúp hoặc liệt nút cuộn thường do switch bị hỏng hoặc bẩn. Bạn có thể mang qua shop để vệ sinh hoặc thay switch mới ạ."
    - text: "Nếu sản phẩm gặp lỗi, bạn vui lòng mang qua cửa hàng TechShop gần nhất để được kỹ thuật viên kiểm tra và hỗ trợ nhé."

  utter_faq/warranty:
    - text: "TechShop bảo hành 12 tháng cho máy mới và 6 tháng cho máy cũ. Lỗi 1 đổi 1 trong 30 ngày đầu nếu có lỗi nhà sản xuất. Bảo hành cả nguồn và màn hình ạ."

  utter_faq/installment:
    - text: "TechShop hỗ trợ trả góp qua thẻ tín dụng (0% lãi suất) hoặc qua công ty tài chính (Home Credit, FE Credit). Thủ tục chỉ cần CMND/CCCD và Bằng lái xe hoặc Hộ khẩu."

  utter_faq/origin:
    - text: "Sản phẩm tại TechShop cam kết chính hãng 100%, có nguồn gốc rõ ràng. Máy cũ là hàng nguyên bản, chưa qua sửa chữa. Bạn có thể check serial/IMEI thoải mái ạ."

  utter_faq/mouse_error:
    - text: "Lỗi click đúp hoặc liệt nút cuộn thường do switch bị hỏng hoặc bẩn. Bạn có thể mang qua shop để vệ sinh hoặc thay switch mới ạ."



actions:
  - utter_greet
  - utter_greet_personalized
  - utter_goodbye
  - utter_ask_product_info
  - utter_ask_product_name
  - utter_ask_quantity
  - utter_ask_variant_name
  - utter_submit_order
  - utter_ask_product_1
  - utter_ask_product_2
  - utter_order_confirmed
  - utter_faq_overheating
  - utter_faq_connection_issue
  - utter_ask_order_id
  - utter_order_not_found
  - utter_no_orders_found
  - utter_ask_return_reason
  - utter_fallback
  - utter_ask_which_product
  - utter_product_not_found
  - action_provide_product_info
  - action_confirm_after_branch
  - action_provide_warranty_info
  - action_provide_store_info
  - action_get_user_info
  - action_provide_order_info
  - action_suggest_product
  - action_preview_order
  - action_submit_order
  - action_cancel_order
  - action_update_cart_quantity
  - action_add_to_cart
  - action_view_cart
  - action_delete_from_cart
  - action_compare_products
  - action_check_stock
  - action_restart_slot
  - action_check_order_specific
  - action_check_order_general
  - action_check_order_filter
  - action_provide_product_price
  - action_show_variant_details
  - action_check_order_by_product
  - action_check_unpaid_or_unshipped_orders
  - action_list_recent_orders
  - action_return_order
  - action_cancel_ordering_process
  - action_provide_product_spec
  - action_provide_product_technical_specs
  - action_show_list_variants

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: false
