version: "3.1"

stories:
  - story: Happy path - Full order flow
    steps:
      - intent: greet
      - action: utter_greet
      - intent: ask_product_info
        entities:
          - product: "iPhone 16"
      - slot_was_set:
          - product: "iPhone 16"
      - action: action_provide_product_info
      - intent: order
      - action: order_form
      - active_loop: order_form
      - active_loop: null
      - slot_was_set:
          - requested_slot: null
      - action: action_preview_order
      - intent: confirm_order
      - action: action_submit_order
      - slot_was_set:
          - product: null
          - variant_name: null
          - quantity: null
      - intent: goodbye
      - action: utter_goodbye

  - story: Happy path - Quick order flow
    steps:
      - intent: greet
      - action: utter_greet
      - intent: order
      - action: order_form
      - active_loop: order_form
      - active_loop: null
      - action: action_preview_order
      - intent: confirm_order
      - action: action_submit_order
      - intent: goodbye
      - action: utter_goodbye

  - story: Unhappy path - Cancel order after preview
    steps:
      - intent: order
      - action: order_form
      - active_loop: order_form
      - active_loop: null
      - action: action_preview_order
      - intent: cancel_order
      - action: action_cancel_order
      - intent: goodbye
      - action: utter_goodbye

  - story: Interaction - Ask about order
    steps:
      - intent: greet
      - action: utter_greet
      - intent: ask_order
      - action: action_provide_order_info
      - intent: goodbye
      - action: utter_goodbye

  - story: Interaction - Ask about warranty
    steps:
      - intent: greet
      - action: utter_greet
      - intent: ask_warranty
      - action: action_provide_warranty_info
      - intent: goodbye
      - action: utter_goodbye

  - story: Interaction - Ask about store
    steps:
      - intent: greet
      - action: utter_greet
      - intent: ask_store
      - action: action_provide_store_info
      - intent: goodbye
      - action: utter_goodbye

  - story: Interaction - Handle out of scope
    steps:
      - intent: greet
      - action: utter_greet
      - intent: out_of_scope
      - action: utter_fallback
      - intent: goodbye
      - action: utter_goodbye

  - story: Interaction - Ask about product only
    steps:
      - intent: greet
      - action: utter_greet
      - intent: ask_product_info
        entities:
          - product: "iPhone 16"
      - slot_was_set:
          - product: "iPhone 16"
      - action: action_provide_product_info
      - intent: goodbye
      - action: utter_goodbye

  - story: Interaction - Compare products with form
    steps:
      - intent: compare_products
      - action: compare_products_form
      - active_loop: compare_products_form
      - active_loop: null
      - action: action_compare_products

  - story: Interaction - Compare products directly
    steps:
      - intent: compare_products
        entities:
          - product_1: "iPhone 16"
          - product_2: "Galaxy S24"
      - slot_was_set:
          - product_1: "iPhone 16"
          - product_2: "Galaxy S24"
      - action: action_compare_products
