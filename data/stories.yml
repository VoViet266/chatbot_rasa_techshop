version: "3.1"

stories:
  - story: order_full_flow
    steps:
      - intent: greet
      - action: utter_greet

      - intent: ask_product_info
        entities:
          - product: iPhone 16
      - slot_was_set:
          - product: iPhone 16
      - action: action_provide_product_info

      - intent: order
      - action: order_form
      - active_loop: order_form
      - active_loop: null

      - action: action_preview_order
      - action: action_listen

      - intent: confirm_order
      - action: action_submit_order
      - slot_was_set:
          - product: null
          - variant_name: null
          - quantity: null
      - action: action_listen

      - intent: goodbye
      - action: utter_goodbye

      # üìù Tr∆∞·ªùng h·ª£p: ƒê·∫∑t h√†ng tr·ª±c ti·∫øp kh√¥ng h·ªèi tr∆∞·ªõc (nhanh)
  - story: quick_order_flow
    steps:
      - intent: greet
      - action: utter_greet

      - intent: order
      - action: order_form
      - active_loop: order_form
      - active_loop: null
      - action: action_preview_order

      - intent: confirm_order
      - action: action_submit_order

      - intent: goodbye
      - action: utter_goodbye

  # üìù H·ªßy ƒë∆°n sau khi xem preview
  - story: cancel_after_preview
    steps:
      # C√≥ th·ªÉ b·∫Øt ƒë·∫ßu b·∫±ng greet -> order ho·∫∑c ch·ªâ order
      - intent: order
      - action: order_form
      - active_loop: order_form
      - active_loop: null
      - action: action_preview_order
      - action: action_listen
      - intent: cancel_order
      - action: action_cancel_order
      - action: action_listen
      - intent: goodbye
      - action: utter_goodbye
  # üìù H·ªèi th√¥ng tin ƒë∆°n h√†ng
  - story: ask_order_info
    steps:
      - intent: greet
      - action: utter_greet

      - intent: ask_order
      - action: action_provide_order_info

      - intent: goodbye
      - action: utter_goodbye

  # üìù H·ªèi th√¥ng tin b·∫£o h√†nh
  - story: ask_warranty_info
    steps:
      - intent: greet
      - action: utter_greet

      - intent: ask_warranty
      - action: action_provide_warranty_info

      - intent: goodbye
      - action: utter_goodbye

  # üìù H·ªèi th√¥ng tin c·ª≠a h√†ng
  - story: ask_store_info
    steps:
      - intent: greet
      - action: utter_greet

      - intent: ask_store
      - action: action_provide_store_info

      - intent: goodbye
      - action: utter_goodbye

  # üìù X·ª≠ l√Ω out of scope
  - story: out_of_scope_handling
    steps:
      - intent: greet
      - action: utter_greet

      - intent: out_of_scope
      - action: utter_fallback

      - intent: goodbye
      - action: utter_goodbye

  # üìù Ch·ªâ h·ªèi th√¥ng tin s·∫£n ph·∫©m
  - story: ask_product_only
    steps:
      - intent: greet
      - action: utter_greet

      - intent: ask_product_info
        entities:
          - product: iPhone 16
      - slot_was_set:
          - product: iPhone 16
      - action: action_provide_product_info

      - intent: goodbye
      - action: utter_goodbye

  # So s√°nh 2 s·∫£n ph·∫©m
  - story: compare_products_with_form
    steps:
      - intent: compare_products
      - action: compare_products_form
      - active_loop: compare_products_form
      - active_loop: null
      - action: action_compare_products
      - action: action_listen

  - story: compare_products_direct
    steps:
      - intent: compare_products
        entities:
          - product_1: "iPhone 16"
          - product_2: "Galaxy S24"
      - slot_was_set:
          - product_1: "iPhone 16"
          - product_2: "Galaxy S24"
      - action: action_compare_products
      - action: action_listen
